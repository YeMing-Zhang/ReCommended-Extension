using System;
using System.Collections.Generic;
using System.Linq;

namespace ReCommendedExtension.Tests.test.data
{
    public class Simple
    {
        List<string> nonNullableReferences;
        List<string?> nullableReferences;
        List<int> nonNullableValues;
        List<int?> nullableValues;

        void NullCheck_Iteration()
        {
            foreach (var item in nonNullableReferences)
            {
                if (|item != null|(0)) { }
            }
            foreach (var item in nullableReferences)
            {
                if (item != null) { }
            }
            foreach (var item in nonNullableValues)
            {
                if (||item != null|(1)|(2)) { }
            }
            foreach (var item in nullableValues)
            {
                if (item != null) { }
            }
        }

        void NullCheck_Iteration_Indexed()
        {
            for (var i = 0; i < nonNullableReferences.Count; i++)
            {
                if (nonNullableReferences[i] != null) { }
            }
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                if (nullableReferences[i] != null) { }
            }
            for (var i = 0; i < nonNullableValues.Count; i++)
            {
                if (||nonNullableValues[i] != null|(3)|(4)) { }
            }
            for (var i = 0; i < nullableValues.Count; i++)
            {
                if (nullableValues[i] != null) { }
            }
        }

        void NullCheck_Linq()
        {
            var query0 = from item in nonNullableReferences where |item != null|(5) select item;
            var query1 = from item in nullableReferences where item != null select item;
            var query2 = from item in nonNullableValues where ||item != null|(6)|(7) select item;
            var query3 = from item in nullableValues where item != null select item;
        }

        void AssigningNull()
        {
            for (var i = 0; i < nonNullableReferences.Count; i++)
            {
                nonNullableReferences[i] = null;
            }
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                nullableReferences[i] = null;
            }
            for (var i = 0; i < nonNullableValues.Count; i++)
            {
                nonNullableValues[i] = default;
            }
            for (var i = 0; i < nullableValues.Count; i++)
            {
                nullableValues[i] = default;
            }
        }

        void AssigningNonNullable()
        {
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                nullableReferences[i] = nonNullableReferences[0];
            }
            for (var i = 0; i < nullableValues.Count; i++)
            {
                nullableValues[i] = nonNullableValues[0];
            }
        }

        void AssigningNullable()
        {
            for (var i = 0; i < nonNullableReferences.Count; i++)
            {
                nonNullableReferences[i] = nullableReferences[0];
            }
        }

        void AddingNull()
        {
            nonNullableReferences.Add(null);
            nullableReferences.Add(null);
            nonNullableValues.Add(default);
            nullableValues.Add(default);
        }

        void AddingNonNullable()
        {
            nullableReferences.Add(nonNullableReferences[0]);
            nullableValues.Add(nonNullableValues[0]);
        }

        void AddingNullable()
        {
            nonNullableReferences.Add(nullableReferences[0]);
        }

        void Dereferencing_Iteration()
        {
            foreach (var item in nonNullableReferences)
            {
                Console.WriteLine(item.Length);
            }
            foreach (var item in nullableReferences)
            {
                Console.WriteLine(|item|(8).Length);
            }
            foreach (var item in nonNullableValues)
            {
                Console.WriteLine(item.ToString());
            }
            foreach (var item in nullableValues)
            {
                Console.WriteLine(item.ToString());
            }
        }

        void Dereferencing_Iteration_Indexed()
        {
            for (var i = 0; i < nonNullableReferences.Count; i++)
            {
                Console.WriteLine(|nonNullableReferences[i]|(9).Length);
            }
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                Console.WriteLine(|nullableReferences[i]|(10).Length);
            }
            for (var i = 0; i < nonNullableValues.Count; i++)
            {
                Console.WriteLine(nonNullableValues[i].ToString());
            }
            for (var i = 0; i < nullableValues.Count; i++)
            {
                Console.WriteLine(nullableValues[i].ToString());
            }
        }
    }

    class Generic<T>
    {
        List<T> any;
        List<|T?|(11)> invalid;

        void NullCheck_Iteration()
        {
            foreach (var item in any)
            {
                if (item != null) { }
            }
        }

        void NullCheck_Iteration_Indexed()
        {
            for (var i = 0; i < any.Count; i++)
            {
                if (any[i] != null) { }
            }
        }

        void NullCheck_Linq()
        {
            var query0 = from item in any where item != null select item;
        }

        void AssigningNull()
        {
            for (var i = 0; i < any.Count; i++)
            {
                any[i] = default;
            }
        }

        void AddingNull()
        {
            any.Add(default);
        }

        void Dereferencing_Iteration()
        {
            foreach (var item in any)
            {
                Console.WriteLine(|item|(12).ToString());
            }
        }

        void Dereferencing_Iteration_Indexed()
        {
            for (var i = 0; i < any.Count; i++)
            {
                Console.WriteLine(|any[i]|(13).ToString());
            }
        }
    }

    class GenericForReference<T> where T : class
    {
        List<T> nonNullableReferences;
        List<T?> nullableReferences;

        void NullCheck_Iteration()
        {
            foreach (var item in nonNullableReferences)
            {
                if (|item != null|(14)) { }
            }
            foreach (var item in nullableReferences)
            {
                if (item != null) { }
            }
        }

        void NullCheck_Iteration_Indexed()
        {
            for (var i = 0; i < nonNullableReferences.Count; i++)
            {
                if (nonNullableReferences[i] != null) { }
            }
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                if (nullableReferences[i] != null) { }
            }
        }

        void NullCheck_Linq()
        {
            var query0 = from item in nonNullableReferences where |item != null|(15) select item;
            var query1 = from item in nullableReferences where item != null select item;
        }

        void AssigningNull()
        {
            for (var i = 0; i < nonNullableReferences.Count; i++)
            {
                nonNullableReferences[i] = null;
            }
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                nullableReferences[i] = null;
            }
        }

        void AssigningNonNullable()
        {
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                nullableReferences[i] = nonNullableReferences[0];
            }
        }

        void AssigningNullable()
        {
            for (var i = 0; i < nonNullableReferences.Count; i++)
            {
                nonNullableReferences[i] = nullableReferences[0];
            }
        }

        void AddingNull()
        {
            nonNullableReferences.Add(null);
            nullableReferences.Add(null);
        }

        void AddingNonNullable()
        {
            nullableReferences.Add(nonNullableReferences[0]);
        }

        void AddingNullable()
        {
            nonNullableReferences.Add(nullableReferences[0]);
        }

        void Dereferencing_Iteration()
        {
            foreach (var item in nonNullableReferences)
            {
                Console.WriteLine(item.ToString());
            }
            foreach (var item in nullableReferences)
            {
                Console.WriteLine(|item|(16).ToString());
            }
        }

        void Dereferencing_Iteration_Indexed()
        {
            for (var i = 0; i < nonNullableReferences.Count; i++)
            {
                Console.WriteLine(|nonNullableReferences[i]|(17).ToString());
            }
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                Console.WriteLine(|nullableReferences[i]|(18).ToString());
            }
        }
    }

    class GenericForReferenceNullable<T> where T : class?
    {
        List<T> nullableReferences;
        List<|T?|(19)> invalidReferences;

        void NullCheck_Iteration()
        {
            foreach (var item in nullableReferences)
            {
                if (item != null) { }
            }
        }

        void NullCheck_Iteration_Indexed()
        {
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                if (nullableReferences[i] != null) { }
            }
        }

        void NullCheck_Linq()
        {
            var query0 = from item in nullableReferences where item != null select item;
        }

        void AssigningNull()
        {
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                nullableReferences[i] = null;
            }
        }

        void AddingNull()
        {
            nullableReferences.Add(null);
        }

        void Dereferencing_Iteration()
        {
            foreach (var item in nullableReferences)
            {
                Console.WriteLine(|item|(20).ToString());
            }
        }

        void Dereferencing_Iteration_Indexed()
        {
            for (var i = 0; i < nullableReferences.Count; i++)
            {
                Console.WriteLine(|nullableReferences[i]|(21).ToString());
            }
        }
    }

    class GenericForValue<T> where T : struct
    {
        List<T> nonNullableValues;
        List<T?> nullableValues;

        void NullCheck_Iteration()
        {
            foreach (var item in nullableValues)
            {
                if (item != null) { }
            }
        }

        void NullCheck_Iteration_Indexed()
        {
            for (var i = 0; i < nullableValues.Count; i++)
            {
                if (nullableValues[i] != null) { }
            }
        }

        void NullCheck_Linq()
        {
            var query3 = from item in nullableValues where item != null select item;
        }

        void AssigningNull()
        {
            for (var i = 0; i < nonNullableValues.Count; i++)
            {
                nonNullableValues[i] = default;
            }
            for (var i = 0; i < nullableValues.Count; i++)
            {
                nullableValues[i] = default;
            }
        }

        void AssigningNonNullable()
        {
            for (var i = 0; i < nullableValues.Count; i++)
            {
                nullableValues[i] = nonNullableValues[0];
            }
        }

        void AddingNull()
        {
            nonNullableValues.Add(default);
            nullableValues.Add(default);
        }

        void AddingNonNullable()
        {
            nullableValues.Add(nonNullableValues[0]);
        }

        void Dereferencing_Iteration()
        {
            foreach (var item in nonNullableValues)
            {
                Console.WriteLine(item.ToString());
            }
            foreach (var item in nullableValues)
            {
                Console.WriteLine(item.ToString());
            }
        }

        void Dereferencing_Iteration_Indexed()
        {
            for (var i = 0; i < nonNullableValues.Count; i++)
            {
                Console.WriteLine(nonNullableValues[i].ToString());
            }
            for (var i = 0; i < nullableValues.Count; i++)
            {
                Console.WriteLine(nullableValues[i].ToString());
            }
        }
    }

    class GenericNotNull<T> where T : notnull
    {
        List<T> nonNullables;
        List<|T?|(22)> invalid;

        void NullCheck_Iteration()
        {
            foreach (var item in nonNullables)
            {
                if (|item != null|(23)) { }
            }
        }

        void NullCheck_Iteration_Indexed()
        {
            for (var i = 0; i < nonNullables.Count; i++)
            {
                if (nonNullables[i] != null) { }
            }
        }

        void NullCheck_Linq()
        {
            var query0 = from item in nonNullables where |item != null|(24) select item;
        }

        void AssigningNull()
        {
            for (var i = 0; i < nonNullables.Count; i++)
            {
                nonNullables[i] = default;
            }
        }

        void AddingNull()
        {
            nonNullables.Add(default);
        }

        void Dereferencing_Iteration()
        {
            foreach (var item in nonNullables)
            {
                Console.WriteLine(item.ToString());
            }
        }

        void Dereferencing_Iteration_Indexed()
        {
            for (var i = 0; i < nonNullables.Count; i++)
            {
                Console.WriteLine(|nonNullables[i]|(25).ToString());
            }
        }
    }
}
---------------------------------------------------------
(0): ReSharper Warning: Expression is always true
(1):<overlapped> ReSharper Warning: Expression is always true
(2): ReSharper Warning: Expression is always true
(3):<overlapped> ReSharper Warning: Expression is always true
(4): ReSharper Warning: Expression is always true
(5): ReSharper Warning: Expression is always true
(6):<overlapped> ReSharper Warning: Expression is always true
(7): ReSharper Warning: Expression is always true
(8): ReSharper Warning: Possible 'System.NullReferenceException'
(9): ReSharper Warning: Possible 'System.NullReferenceException'
(10): ReSharper Warning: Possible 'System.NullReferenceException'
(11): ReSharper Underlined Error Highlighting: Only non-nullable value type could be underlying of 'System.Nullable'
(12): ReSharper Warning: Possible 'System.NullReferenceException'
(13): ReSharper Warning: Possible 'System.NullReferenceException'
(14): ReSharper Warning: Expression is always true
(15): ReSharper Warning: Expression is always true
(16): ReSharper Warning: Possible 'System.NullReferenceException'
(17): ReSharper Warning: Possible 'System.NullReferenceException'
(18): ReSharper Warning: Possible 'System.NullReferenceException'
(19): ReSharper Underlined Error Highlighting: Only non-nullable value type could be underlying of 'System.Nullable'
(20): ReSharper Warning: Possible 'System.NullReferenceException'
(21): ReSharper Warning: Possible 'System.NullReferenceException'
(22): ReSharper Underlined Error Highlighting: Only non-nullable value type could be underlying of 'System.Nullable'
(23): ReSharper Warning: Expression is always true
(24): ReSharper Warning: Expression is always true
(25): ReSharper Warning: Possible 'System.NullReferenceException'
