using System;

namespace ReCommendedExtension.Tests.test.data
{
    public class Simple
    {
        string this[int a]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }
        string? this[int a, int b]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }

        int this[int a, int b, int c]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }
        int? this[int a, int b, int c, int d]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }

        void NullCheck()
        {
            if (|this[0] != null|(0)) { }
            if (this[1, 1] != null) { }
            if (||this[2, 2, 2] != null|(1)|(2)) { }
            if (this[3, 3, 3, 3] != null) { }
        }

        void AssigningNull()
        {
            this[0] = |null|(3);
            this[1, 1] = null;
            this[2, 2, 2] = default;
            this[3, 3, 3, 3] = default;
        }

        void AssigningNonNullable()
        {
            this[1, 1] = this[0];
            this[3, 3, 3, 3] = this[2, 2, 2];
        }

        void AssigningNullable()
        {
            this[0] = |this[1, 1]|(4);
        }

        void Dereferencing()
        {
            Console.WriteLine(this[0].Length);
            Console.WriteLine(|this[1, 1]|(5).Length);
            Console.WriteLine(this[2, 2, 2].ToString());
            Console.WriteLine(this[3, 3, 3, 3].ToString());
        }
    }

    class Generic<T>
    {
        T this[int a]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }
        |T?|(6) this[int a, int b]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }

        void NullCheck()
        {
            if (this[0] != null) { }
        }

        void AssigningNull()
        {
            this[0] = default;
        }

        void Dereferencing()
        {
            Console.WriteLine(|this[0]|(7).ToString());
        }
    }

    class GenericForReference<T> where T : class
    {
        T this[int a]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }
        T? this[int a, int b]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }

        void NullCheck()
        {
            if (|this[0] != null|(8)) { }
            if (this[1, 1] != null) { }
        }

        void AssigningNull()
        {
            this[0] = |null|(9);
            this[1, 1] = null;
        }

        void AssigningNonNullable()
        {
            this[1, 1] = this[0];
        }

        void AssigningNullable()
        {
            this[0] = |this[1, 1]|(10);
        }

        void Dereferencing()
        {
            Console.WriteLine(this[0].ToString());
            Console.WriteLine(|this[1, 1]|(11).ToString());
        }
    }

    class GenericForReferenceNullable<T> where T : class?
    {
        T this[int a]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }
        |T?|(12) this[int a, int b]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }

        void NullCheck()
        {
            if (this[0] != null) { }
        }

        void AssigningNull()
        {
            this[0] = null;
        }

        void Dereferencing()
        {
            Console.WriteLine(|this[0]|(13).ToString());
        }
    }

    class GenericForValue<T> where T : struct
    {
        T this[int a]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }
        T? this[int a, int b]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }

        void NullCheck()
        {
            if (this[1, 1] != null) { }
        }

        void AssigningNull()
        {
            this[0] = default;
            this[1, 1] = default;
        }

        void AssigningNonNullable()
        {
            this[1, 1] = this[0];
        }

        void Dereferencing()
        {
            Console.WriteLine(this[0].ToString());
            Console.WriteLine(this[1, 1].ToString());
        }
    }

    class GenericNotNull<T> where T : notnull
    {
        T this[int a]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }
        |T?|(14) this[int a, int b]
        { 
            get => throw new NotSupportedException();
            set => throw new NotSupportedException();
        }

        void NullCheck()
        {
            if (|this[0] != null|(15)) { }
        }

        void AssigningNull()
        {
            this[0] = |default|(16);
        }

        void Dereferencing()
        {
            Console.WriteLine(this[0].ToString());
        }
    }
}
---------------------------------------------------------
(0): ReSharper Warning: Expression is always true
(1):<overlapped> ReSharper Warning: Expression is always true
(2): ReSharper Warning: Expression is always true
(3): ReSharper Warning: Possible 'null' assignment to entity marked with 'NotNull' attribute
(4): ReSharper Warning: Possible 'null' assignment to entity marked with 'NotNull' attribute
(5): ReSharper Warning: Possible 'System.NullReferenceException'
(6): ReSharper Underlined Error Highlighting: Only non-nullable value type could be underlying of 'System.Nullable'
(7): ReSharper Warning: Possible 'System.NullReferenceException'
(8): ReSharper Warning: Expression is always true
(9): ReSharper Warning: Possible 'null' assignment to entity marked with 'NotNull' attribute
(10): ReSharper Warning: Possible 'null' assignment to entity marked with 'NotNull' attribute
(11): ReSharper Warning: Possible 'System.NullReferenceException'
(12): ReSharper Underlined Error Highlighting: Only non-nullable value type could be underlying of 'System.Nullable'
(13): ReSharper Warning: Possible 'System.NullReferenceException'
(14): ReSharper Underlined Error Highlighting: Only non-nullable value type could be underlying of 'System.Nullable'
(15): ReSharper Warning: Expression is always true
(16): ReSharper Warning: Possible 'null' assignment to entity marked with 'NotNull' attribute
